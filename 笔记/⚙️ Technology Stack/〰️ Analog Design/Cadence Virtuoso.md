

### Mentor Calibre 版图验证工具

随着集成电路“超大规模集成”（芯片功能更复杂、元件密度更高），**需要验证的设计细节呈指数级增长**。此时，**版图物理验证成为“纠错降本”的关键环节**（提前发现设计错误，避免流片后返工，大幅降低成本和风险）。  

> [!note] 核心任务
>
> 芯片设计中，版图物理验证要解决 **“设计是否合法、电学是否合理、物理与逻辑是否一致”**，对应：
>
> 1. **DRC（设计规则检查）**：  
>    检查版图是否符合 **制造工艺规则**（如线宽、线间距、过孔尺寸等），避免因物理设计违规导致芯片制造失败。
> 2. **ERC（电学规则检查）**：  
>    检查电路的 **电学合理性**（如短路、悬空引脚、电源/地连接错误等），排除潜在电气故障。
> 3. **LVS（版图与电路图一致性检查）**：  
>    对比 **物理版图** 和 **原理电路图**，确保两者的电路连接完全一致（防止“画错版图，逻辑白搭”）。

> [!note] 主流工具
> 
> 行业内，主流EDA厂商都提供版图验证工具：  
> 
> - Cadence（Assura）、Synopsys（Hercules）、Mentor（Calibre）。
> - **Calibre的核心竞争力**：  
>   ✔️ **交互界面友好**：工程师易操作，降低学习成本；  
>   ✔️ **验证算法高效**：处理超大规模芯片时速度更快；  
>   ✔️ **错误定位精准**：快速定位问题根源，减少调试时间。  
> 
> 因此，Calibre在集成电路物理验证领域 **市场占有率最高**。  

#### Mentor Calibre版图验证工具调用

Mentor Calibre 支持 **3种启动模式**，覆盖不同使用场景：  

1. **嵌入Cadence Virtuoso Layout Editor**：  
   把Calibre集成到Cadence版图设计环境中，方便“设计→验证”衔接。  
2. **Calibre图形界面**：  
   独立启动Calibre的GUI，适合单独验证（但需手动导入版图文件）。  
3. **Calibre查看器（Calibre View）**：  
   主要用于 **查看验证结果**（如DRC报错位置、LVS对比报告）。  

##### 内嵌 `Cadence Virtuoso Layout Editor`

要想`Cadence`直接调用`Calibre`，需通过 **修改初始化文件 + 启动软件** 实现，分3步：  

**步骤1：修改 `.cdsinit` 文件（Cadence初始化脚本）**  

- **文件位置**：用户根目录（Unix/Linux系统中，以 `.` 开头的是隐藏文件）。  
- **作用**：`.cdsinit` 是Cadence启动时自动执行的脚本文件，通过添加代码，让Cadence加载Calibre的功能。  
- **添加内容**：在文件末尾写入：  

  ```skill
  load "/usr/calibre/calibre.skl"
  ```  

  （`calibre.skl` 是Calibre提供的 **Skill语言脚本**，Skill是Cadence的二次开发语言，用于扩展Cadence功能。）  

**步骤2：启动Cadence Virtuoso**  

- 进入工作目录后，执行命令：  

  ```bash
  icfb&
  ```  

  （`icfb` 是Cadence Virtuoso的启动命令，`&` 表示“后台运行”，避免占用终端。）  

**步骤3：调用Calibre（菜单自动生成）**  

- 打开 **版图文件**（已有或新建的版图设计）后，Cadence的 `Layout Editor` 菜单栏会 **新增“Calibre”菜单**（如图3-1，文中未展示图，但逻辑是“集成成功的标志”）。  
- 菜单包含3个子功能（表3-1）：  

  | 子菜单      | 功能                     | 关联前文的验证任务       |  
  |-------------|--------------------------|--------------------------|  
  | `Run DRC`   | 运行Calibre的DRC检查     | 设计规则检查（DRC）      |  
  | `Run DFM`   | 运行Calibre的DFM检查     | 可制造性设计（本书暂不讲）|  
  | `Run LVS`   | 运行Calibre的LVS检查     | 版图-电路图一致性检查（LVS）|  

> [!tip] 技术细节的深层理解
>
> 1. **为什么改 `.cdsinit`？**  
>    Cadence和Calibre是不同公司的软件，通过 **Skill脚本“桥接”** 实现集成：Calibre提供 `calibre.skl`，让Cadence能调用其验证功能。
>
> 2. **`icfb` 命令的意义？**  
>    是Cadence Virtuoso的 **交互模式启动命令**（Interactive Customization Framework，简称icfb），是版图设计的核心入口。
>
> 3. **菜单功能的价值？**  
>    把Calibre的验证功能“植入”Cadence的菜单栏，让工程师 **不用切换软件** 就能完成DRC、LVS，大幅提升设计效率（呼应前文“本书采用嵌入方式介绍”的逻辑）。 

简言之，这段内容的核心是 **“手把手教你把Calibre装到Cadence里”**：通过修改初始化文件，让Cadence菜单里出现Calibre的验证入口，后续直接点击 `Run DRC`/`Run LVS` 就能开展版图验证——这是芯片设计中“版图→验证”流程的关键衔接步骤。

### 标准IO单元库的设计与验证

在SoC和VLSI设计流程中，**单元库**是简化设计流程、优化设计参数的重要工具。单元库包含两类：

- **标准逻辑单元库**：数字设计流程“不可或缺”的一环；
- **标准I/O单元库**：作为“宏观（芯片外部）到微观（芯片内部电路）的桥梁”，需兼顾多方面要求——芯片间互连的电学指标兼容性、内部向外的驱动能力、外部向内的传输功能，以及整体抗静电放电（ESD）能力等。优质的标准I/O单元库还能同时满足“基本电学参数要求”与“面积小、功能多、适应性强”等优点。

#### 标准I/O单元库概述

> [!note] 焊盘开口（Pad Opening）
>
> 焊盘开口与“焊盘尺寸”不同，它体现的是**焊盘上方对钝化层的掩膜尺寸**，每个边的尺寸比金属部分小约 $5\,\mu\text{m}$。
>
> - **必要性**：焊盘必须有开口才能作为“外部电学连接”使用。若没有对钝化层的掩膜，焊盘金属上方会形成致密的金属钝化层，无法开展任何封装操作。
> - **对封装的影响**：焊盘开口决定了后续封装时“金丝的最大直径”。例如：PGA封装中，开口为 $65\,\mu\text{m}$ 的焊盘，优选直径约 $25\,\mu\text{m}$ 的金丝，经验公式为：$\text{焊盘开口} = 2.5 \times \text{金丝直径}$（PGA封装时，金球直径为 $2 \times \text{金丝直径}$）。
> - **设计注意事项**：过小的焊盘开口无法完成封装，因此在标准I/O单元库设计前期，需与封装厂商沟通“常用封装方式”及“焊盘开口的尺寸要求”。

2. 单元基本宽度（Pitch）

一般情况下，**一套标准I/O单元库中，每个单元的横向和纵向尺寸（宽度、高度）是通用的**（即“单元基本宽度”统一）。这种特点的原因的有两点：

- 自动封装的要求：任意相邻两个焊盘的中心距离需一致，因此单元库设计时，每个单元的**横向尺寸**必须相同。
- 后端流程的需求：若两个单元纵向尺寸不同，无法精确拼接；若横向尺寸不同，无法用同一个“偏移量（offset）”描述，会增加设计复杂度。

- **对性能的影响**：单元基本宽度决定了单元库的“基本物理性能”——宽度过大，会浪费流片面积；宽度过小，会影响版图正常布局，进而间接影响标准I/O单元库的**基本电学参数**。（特殊情况会存在“非正常单元基本宽度”，需设计者额外考虑）

