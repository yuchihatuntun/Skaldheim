# 引言
<span style="font-weight:bold; color:rgb(82, 143, 173)">局部性原理</span>：任意一段时间内程序只会访问地址空间中相对较小的一部分内容，类似于人在一段时间之内只会读取图书馆中很少一部分书籍（不会把每一本书每一页都看一眼）

- <span style="font-weight:bold; color:rgb(231, 98, 84)">时间局部性</span>：如果某数据项被访问，那么在不久的未来它会被继续访问
- <span style="font-weight:bold; color:rgb(231, 98, 84)">空间局部性</span>：某数据项被访问，其地址临近的数据项也很可能被访问
# 存储技术
在当今的层次化存储中有四种主要技术。
![[Pasted image 20250207111225.png]]
1. 主存采用<span style="font-weight:bold; color:rgb(231, 98, 84)">动态随机访问存储</span>（Dynamic Random Access Memory，DRAM）器件实现；
2. 靠近处理器的存储层次使用<span style="font-weight:bold; color:rgb(231, 98, 84)">静态随机访问存储</span>（Static Random Access Memory，SRAM）器件实现。

DRAM 的访问速度慢于 SRAM，但它的每比特成本（cost per bit）也要低很多。两者的价格差主要源于 ==DRAM 的每比特占用面积远远小于 SRAM==，因而 DRAM 能在等量的硅上实现更大的存储容量。两者的速度差源于许多因素。

3. 第三种技术称为<span style="font-weight:bold; color:rgb(231, 98, 84)">闪存</span>（flash memory）。

这种非易失性存储一般作为==个人移动设备的二级存储==。

4. 第四种技术是<span style="font-weight:bold; color:rgb(231, 98, 84)">磁盘</span>（magnetic disk），用来实现服务器上最大也是最慢的存储层次。
### SRAM存储技术
![[Pasted image 20250207111839.png|437]]
SRAM 存储是一种存储阵列结构的简单集成电路，通常有一个读写端口。虽然读写操作的访问时间不同，但==对于任意位置的数据，SRAM 的访问时间是固定的==。

SRAM 不需要刷新电路，所以访问时间可以和处理器的时钟周期接近。为防止读操作时信息丢失，典型的 SRAM <span style="font-weight:bold; color:rgb(231, 98, 84)">每比特采用 6 个或 8 个晶体管来实现</span>。在待机模式下，SRAM 只需要最小的功率来保持电荷。

过去，大多数个人电脑和服务器使用独立的 SRAM 芯片作为一级、二级甚至三级高速缓存（cache）。如今感谢摩尔定律，所有的高速缓存都被集成到了处理器芯片上，因此独立 SRAM 芯片的市场已经消失。
### DRAM存储技术
![[Pasted image 20250207112227.png|521]]
在 SRAM 中，只要提供电源，数值会被一直保存。而在 DRAM 中，使用电容保存电荷的方式来存储数据。采用单个晶体管来访问存储的电荷，或者读取它，或者改写它。==DRAM 的每个比特仅使用单个晶体管来存储数据，它比 SRAM 的密度更高，每比特价格更低廉。==由于 DRAM 在单个晶体管上存储电荷，因此不能长久保持数据，<span style="font-weight:bold; color:rgb(231, 98, 84)">必须进行周期性的刷新</span>。与 SRAM 相比，这也是该结构被称为动态的原因。

为了刷新数据单元，我们只需要<span style="font-weight:bold; color:rgb(247, 170, 88)">读取其中的内容并再次写回</span>，DRAM 中的电荷可以保持几微秒。如果每一比特数据都从 DRAM 中读出再被一一写回，就必须不停进行刷新操作，那么就会没有时间进行正常的数据访问。幸运的是，DRAM 使用两级译码电路[^1]，这使我们可以使用一个读周期紧跟一个写周期的方式一次性完成整行刷新（同一行上的数据共享一条字线）。
![[Pasted image 20250207113507.png|543]]

[^1]: 在DRAM中，地址被分成行地址和列地址两部分，这被称为行-列（Row-Column）或X-Y译码。具体来说，地址总线上的地址信号首先被分割成行地址和列地址。行地址首先通过行地址选通脉冲（RAS）锁存到DRAM芯片内部，然后经过行译码器进行译码，选择相应的行。一旦选定了一行，该行的所有数据将被读出，并放置在一个临时的缓冲区中，这个过程叫做“行激活”
