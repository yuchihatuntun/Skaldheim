### 绪论

#### 课程要求与成绩分布

##### 成绩分布

- 作业 + 课堂测验：占比50%，包含5 - 6次平时作业和1 - 2次课堂测试，且严禁雷同抄袭。
- 期末考试：占比50%，为闭卷考试。

##### 教学安排

数学部分安排18 + 9讲，每讲2学时，总共54学时，其中2学时期中复习，2学时期末复习。

##### 课程助教及联系方式

- 李晓东（博3）：<lixj263@mail2.sysu.edu.cn>，发表领域为MICRO、ISVLSI。
- 钟佰清（博1）：<zhongbq@mail2.sysu.edu.cn>，发表领域为CCD、ISVLSI。
- 黄海秋（硕2）：<huanghq73@mail2.sysu.edu.cn>，发表领域为TCAS - II。

#### 课程参考资料

|序号|书名|作者|译者|出版社|出版时间|
| ---- | ---- | ---- | ---- | ---- | ---- |
|1|《数字集成电路——电路、系统与设计》（第二版）|Jan M. Rabaey，Anantha Chandrakasan，Borivoje Nikolic|周润德|电子工业出版社| - |
|2|《CMOS超大规模集成电路设计》（第四版）|Neil H. E.Weste & David Harris|周润德|电子工业出版社| - |
|3|《纳米CMOS集成电路——从基本原理到专用芯片实现》|Harry Veendrick|周润德|电子工业出版社| - |
|4|《现代VLSI设计：基于IP核的设计（第4版）（英文版）》|Wayne Wolf| - |电子工业出版社| - |
|5|《众核处理器——原理、设计与优化》|李兆麟，王明羽，魏少军| - |清华大学出版社|2021|
|6|《数字集成电路设计实践》|王明羽，虞志益，李兆麟| - |清华大学出版社|2025（拟出版）|

#### 什么是数字集成电路设计

从<span style="font-weight:bold; color:rgb(255, 182, 193)">功能（Function）、逻辑（Logic）、电路（Circuit）到版图（Layout）</span>，依次递进，同时“<span style="background:rgba(163, 218, 252, 0.55)">Verification（验证）</span>”贯穿整个流程，用于确保每个设计阶段的正确性，保障数字集成电路设计能按预期实现功能。

<span style="font-weight:bold; color:rgb(255, 182, 193)">从需求到最终芯片主流程</span>：

按设计与制造的先后顺序，分为10个关键阶段：

1. **Specifications（规格定义）**：明确芯片的核心需求，包括功能、功耗、性能、面积等，是设计的“目标蓝图”。
2. **Architectural Design（架构设计）**：基于规格，规划芯片的整体架构（如模块划分、数据通路等），是高层结构规划。
3. **RTL Coding & Functional Verification（RTL编码与功能验证）**：
   - 用硬件描述语言（HDL，如Verilog/VHDL）编写**寄存器传输级（RTL）代码**，描述“寄存器与数据传输逻辑”；
   - 同时通过“功能验证”，确保RTL代码实现了预期功能。
4. **Logic Synthesis（逻辑综合）**：将RTL代码转换为**门级网表**（由逻辑门、触发器等基本单元组成的电路描述），把抽象的RTL描述映射到具体逻辑单元。
5. **Logic Verification & Testing（逻辑验证与测试）**：验证门级网表的逻辑正确性，确保综合后的电路功能符合预期，还会涉及“可测性设计”（方便后续芯片测试）。
6. **Physical Design（物理设计）**：进入“物理层面”设计，包括**版图系统规划、布局、时钟树生成、布线**等，将逻辑网表转化为“物理版图”。
7. **Physical Verification & Signoff（物理验证与签核）**：对物理版图进行多维度验证（如DRC、LVS、静态时序分析、功耗分析等），验证通过后“签核”，才能进入制造环节。
   - DRC（设计规则检查）：确保版图符合“制造工艺规则”；
   - LVS（版图与网表比对）：确保版图和逻辑网表一致；
   - 静态时序分析/功耗分析：验证时序性能、功耗是否达标。
8. **Fabrication（制造）**：即“流片”，在晶圆厂通过半导体工艺，把版图“制造”成实际的芯片（晶圆上的电路）。
9. **Packaging & Testing（封装与测试）**：将晶圆上的芯片切割、封装，并测试封装后芯片的功能、性能，确保成品合格。
10. **Chip（芯片）**：最终交付的“成品芯片”。

> [!note]前端 - 后端细分流程
> 
> 流程聚焦于“设计阶段的分工”，明确**前端设计（逻辑层面）**与**后端版图设计（物理层面）**的边界与协作：
> 
> - **前端设计**：侧重逻辑层面的设计与验证，包括：
>   - 需求分析与工艺选择：明确需求并选定制造工艺；
>   - 电路与架构设计：对应“Architectural Design”阶段；
>   - 逻辑综合：对应“Logic Synthesis”阶段；
>   - 验证环节：包括**HDL仿真验证**（验证RTL代码功能）、**综合后仿真验证与形式验证**（验证门级网表）。
> 
> - **后端版图设计**：侧重物理层面的版图实现与验证，包括：
>   - 版图系统规划：整体布局与模块分布规划；
>   - 布局：将逻辑单元映射到具体物理位置；
>   - 时钟树生成：设计时钟信号传输网络，保障同步性；
>   - 布线：完成信号线的物理连接；
>   - 流片：对应“Fabrication”阶段；
>   - 验证环节：包括**版图后仿真验证、静态时序分析、功耗分析、DRC、LVS**等物理验证，以及**版图参数提取**（为后仿真提供物理参数）。

#### 集成电路设计方法学发展

**传统电路验证方法**

早期电路验证采用“实验板”方式，但存在明显不足：

- 与实际集成电路的差异大（实验板的环境、器件特性等，和真实芯片场景偏差明显）；
- 无法开展“容差分析”（如器件参数波动对电路的影响）和“极限条件验证”（如温度、电压极值下的电路表现）；
- 验证速度慢，效率低下。

**60 - 70年代的技术进展：Layout DRC + Circuit Simulation**

这一时期，集成电路设计开始借助计算机工具，核心特点是：

- **硬件基础**：依托“16位小型机”（提供计算能力支持）；
- **软件能力**：具备“交互式图形编辑”（方便设计师进行版图绘制）和“设计规则检查（DRC）”（确保版图符合芯片制造的工艺规则），同时结合“电路仿真”，初步实现了**计算机辅助的设计与验证**，提升了设计效率与规范性。

**电路模拟的基本方法**

通过列出“数学形式的电路方程”，再对这些方程进行求解，以此模拟、分析电路的行为特性。

> [!note] SPICE
>
> SPICE（全称 *Simulation Program with Integrated Circuit Emphasis*，意为“侧重于集成电路的仿真程序”）是**世界上第一个电路模拟程序**，由美国加州大学伯克利分校自1970年起开发，为集成电路设计的“仿真验证”奠定了关键基础。
>
> - 1975年：推出第一个版本 **SPICE2G**；
>
> - 1981年：更新至 **SPICE2G6**；
>
> - 在此基础上，后续衍生出多款电路模拟程序，包括 **SPICE3**、**HSPICE**、**PSPICE**，以及1990年出现的 **Fast SPICE** 等（相关参考可查阅资料页码“*Meth.p38,26*”）。


> [!note] 第二代：CAE（Computer Aided Engineering，计算机辅助工程）
>
> 80年代的CAE技术聚焦于三类关键能力的结合：
>
> - **版图布局与布线**（Layout Placement and Routing）：自动化完成芯片版图中元件的布局和线路连接；
> - **逻辑仿真**（Logic Simulation）：对电路逻辑功能进行模拟验证；
> - **版图与原理图比对**（LVS, Layout Versus Schematic）：验证版图是否与设计原理图一致。
>
> 依托32位工作站（相比第一代16位小型机，计算能力更强），能支撑更复杂的设计与仿真任务，形成了完整的“后端CAD工具链”，覆盖从逻辑图输入、逻辑模拟、电路模拟，到自动布局布线、物理设计检查的全流程，大幅提升了集成电路设计的自动化和系统化程度。
>
> **物理检查（Physical Checking）**是保障版图可制造性与设计正确性的关键，包含四类验证：
>
> - **DRC**（Design Rule Check）：设计规则检查，确保版图符合芯片制造工艺规则；
> - **ERC**（Electrical Rule Check）：电气规则检查，确保电路电气特性符合要求（如短路、悬空等问题）；
> - **LPE**（Layout Parameter Extraction）：版图参数提取，从版图中提取电气参数用于后续仿真/验证；
> - **LVS**（Layout Versus Schematic）：版图与原理图比对，验证版图和设计原理图的一致性。

> [!note] 第三代：EDA（Electronics Design Automation，电子设计自动化）
>
> 1. **Top-Down（自顶向下）设计技术**
>
>    这是一种从“系统高层需求”向“底层电路实现”逐步分解的设计流程，核心支撑为：
>    - **硬件描述语言（HDL）**：如VHDL、Verilog HDL，以代码形式描述硬件电路的行为、结构或功能（如逻辑运算、时序特性等），是高层设计的核心表达工具。
>    - **高层次综合与逻辑综合工具**：结合HDL，可自动将高层次设计描述（如算法级、行为级的HDL代码）转化为低层次逻辑电路表示（如门级网表），大幅提升设计效率。
>
> 2. **工艺无关性（Technology Independent）**
>
>    EDA设计具有与具体制造工艺解耦的优势：HDL源代码不绑定特定芯片工艺或硬件载体，可通过不同单元库、工艺库，灵活转化为多种电路形式（如ASIC、FPGA等），让设计具备可移植性与复用性，适配不同生产需求或硬件平台。

> [!note] 第四代EDA——超深亚微米（VDSM, Very Deep Sub-Micron）EDA
>
> **1. 时代背景与核心趋势**
>
> 自1997年以来，集成电路设计进入了**“片上系统（SoC）”时代**，即需将完整系统（如计算、存储、接口等功能）集成在单一芯片上。这对EDA工具提出了更高的复杂系统支持能力要求。
>
> **2. 设计方法：“自顶向下 + 自底向上”协同**
>
> - **自顶向下（Top-Down）**：用于系统级设计和宏模块（IP，Intellectual Property，知识产权模块）设计。从系统整体需求出发，分解并设计各功能模块（包括可复用的IP模块，如CPU核、DSP核等），保障系统架构的整体性与前瞻性。
> - **自底向上（Bottom-Up）**：通过IP复用技术实现SoC。由于SoC集成度极高，从头设计所有模块效率低下，因此复用“已验证的IP模块”（经过流片或大规模验证的成熟模块），从底层成熟IP向上集成，快速构建完整系统芯片，同时提升设计可靠性。

**IP复用（知识产权核复用）**

![alt text](image.png)

- **设计方法学**：采用**基于平台的设计方法**——不再从头设计所有模块，而是复用**已验证的功能模块**（这些预先设计好的模块被称为“IP核（Intellectual Property核）”）。
- **核心逻辑**：IP核类似“功能积木”，可重复集成到SoC中，大幅减少重复开发时间、提升设计效率，助力芯片快速推向市场。

IP核（Virtual Component，虚拟组件）共分为四类，各类特点如下：

1. 软核（Soft Core）

形式为**可综合的HDL（硬件描述语言，如Verilog/VHDL）代码**。

- 特点：灵活性高，可根据不同工艺库进行逻辑综合，适配多种芯片制造工艺。

2. 固核（Firm Core）

形式为**网表（Netlist）**。

- 特点：网表是“逻辑综合后”的产物，描述逻辑门及连接关系，比软核更接近物理实现，但仍保留一定适配性。

3. 硬核（Hard Core）

形式为**GDSII（版图数据格式）**。

- 特点：已完成“物理设计”，包含确定的物理尺寸、时序等信息，复用性强，但灵活性低（物理结构固定）。

4. 验证核（Verification Core）

形式为**行为级HDL模型（Behavioral HDL model）**，且“一般为不可综合代码”。

- 特点：不用于生成实际电路，**仅用于功能验证**（在设计阶段，对其他IP或系统的功能进行仿真、验证）。

**电子系统集成方式的演进路径**，依次为 **PCB系统**、**SoC（片上系统）**、**Chiplet（小芯片）** 三大阶段，核心是“系统集成度与设计灵活性的逐步升级”：

1. PCB（Print Circuit Board，印刷电路板）系统

传统电子系统通过**PCB（印刷电路板）**，将多个**独立芯片/模块**（如ROM、CPU等）用电路板上的导线连接，组成完整系统。

- 特点：设计灵活（可自由搭配芯片），但芯片间连线长，导致**功耗高、延迟大、系统体积大**。

2. SoC（System on Chip，片上系统）

把原本PCB上的**多类功能模块**（如CPU、ROM、DSP、模拟电路、接口（IF）等），**集成到单一芯片内**。

- 优势：消除了芯片间的长连线，大幅降低功耗、延迟，缩小系统体积，是过去数十年“高集成度系统”的核心实现方式。

3. Chiplet（小芯片）

将系统拆分为**多个专用“小芯片”**（如计算类Chiplet、存储类Chiplet、客户定制IP的Chiplet等），再通过**高速标准化的芯片间接口（如UCIe）**，在**封装层面**（而非单一芯片内）集成在一起（即“Package上的平台”）。

- 关键特点：
  - **模块化复用**：不同Chiplet可作为“功能积木”，按需组合，提升设计灵活性；
  - **工艺适配性**：每个Chiplet可采用**最适合自身功能的工艺**制造（如计算模块用先进逻辑工艺，存储模块用存储工艺），突破“单一芯片需统一工艺”的限制；
  - **先进封装支持**：结合2D/2.5D/3D封装技术，在封装内实现小芯片间的高速互联，兼顾“集成度”与“设计/工艺灵活性”。

##### 测试平台

测试平台是为“模拟验证”编写的代码，核心作用是：对待测设计（或模型）产生**预先确定的输入序列**，再**选择性地观察、验证其响应结果**，以此判断待测设计是否符合预期。


既可以用**硬件描述语言**（如Verilog、VHDL等）编写，也能采用专用的**验证语言**（如e语言、OpenVera等）编写。

测试平台的结构：

- **激励生成**：负责产生待测模型需要的输入信号（测试激励）。
- **待测模型**：被验证的对象（比如某段硬件逻辑、一个模块等）。
- **响应检测**：接收待测模型的输出，验证其是否与预期结果一致。

这三个部分共同构成“测试平台”，完成“输入激励→待测模型处理→输出响应验证”的全流程验证。

**可复用的测试基准——总线功能模型（BFM，Bus-Function Model）**

BFM是一种程序模块，作用是：将“测试数据组提供的测试数据”，通过**统一的任务接口**，按照“待测模型（或设计）端口的时序和协议”进行封装、组合，使其能被待测对象正确识别与处理。

BFM由**子程序、Task（任务）**等组成，是“代替总线的简单模型”，核心优势是**可复用**——无需为不同验证场景重复开发总线交互逻辑，能大幅提升验证效率。

#### 集成电路（IC）产业的完整产业链流程

1. 上游：晶圆材料与设计环节

- **晶圆材料厂**：负责生产芯片的基础材料——晶圆。流程为：
  硅原料 → 拉晶（制成单晶硅棒）→ 切割（切成硅片）→ 研磨 → 清洗，最终得到可用的晶圆。

- **电路设计公司**：完成芯片的电路设计，利用**CAD（计算机辅助设计）**工具优化设计，再通过**Tape out（流片）**将设计数据交付制造环节。

- **光罩制作厂**：根据设计数据制作**Reticle（光罩）**——光刻工艺中用于“复印”电路图案的模板。

2. 中游：芯片制造（集成电路制造厂）

集成电路制造厂（晶圆厂，Fab）是核心环节，接收**晶圆**和**光罩**后，开展一系列精密工艺：

- 初始流程：硅片投入 → 刻号 → 清洗；
- 薄膜制备：氧化、化学气相沉积、金属溅镀、护层沉积（构建芯片的各层薄膜结构）；
- 图形化与掺杂：微影（光阻涂覆、曝光、显影）→ 蚀刻 → 离子植入/扩散 → 光阻去除（在薄膜上“雕刻”电路图案并实现掺杂改性）；
- 晶圆级测试：**WAT测试（晶圆级电性测试）**，初步检测晶圆上每个芯片的电性是否合格。

3. 下游：封装、测试与交付

- **IC封装厂**：对制造好的晶圆进行后处理，流程为：切割（将晶圆上的单个芯片分离）→ 打线（芯片与封装引脚的金线键合）→ 封装（给芯片加外壳，保护芯片并提供外部引脚）。

- **IC测试厂**：进行多轮测试确保芯片功能可靠：
  硅片针测（封装前，对晶圆上的芯片初步测试）→ IC测试（封装后，全面测试芯片功能、性能）→ Burn in（老化测试，筛选早期失效芯片），最终将合格芯片交付**客户**。

